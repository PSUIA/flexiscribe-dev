{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Python%20Projects/PSUIA/fLexiScribe/client/app/prototype/page.jsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { FaPlay, FaMicrophone, FaCheck } from \"react-icons/fa\";\r\nimport \"./styles.css\";\r\n\r\nexport default function PrototypeDashboard() {\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [micConnected, setMicConnected] = useState(false);\r\n  const [mounted, setMounted] = useState(false);\r\n  const [audioLevel, setAudioLevel] = useState(0);\r\n  const [audioStream, setAudioStream] = useState(null);\r\n  const animationFrameRef = React.useRef(null);\r\n  const audioContextRef = React.useRef(null);\r\n  const analyserRef = React.useRef(null);\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n    // Check microphone permission on mount only if API is available\r\n    if (typeof window !== 'undefined' && navigator?.mediaDevices?.getUserMedia) {\r\n      checkMicrophonePermission();\r\n    }\r\n\r\n    // Cleanup on unmount\r\n    return () => {\r\n      if (animationFrameRef.current) {\r\n        cancelAnimationFrame(animationFrameRef.current);\r\n      }\r\n      if (audioStream) {\r\n        audioStream.getTracks().forEach(track => track.stop());\r\n      }\r\n      if (audioContextRef.current) {\r\n        audioContextRef.current.close();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const checkMicrophonePermission = async () => {\r\n    // Check if we're in a browser environment\r\n    if (typeof window === 'undefined' || !navigator?.mediaDevices?.getUserMedia) {\r\n      setMicConnected(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      setMicConnected(true);\r\n      setAudioStream(stream);\r\n      \r\n      // Set up audio analysis for mic activity animation\r\n      startAudioMonitoring(stream);\r\n    } catch (err) {\r\n      console.error(\"Microphone access denied:\", err);\r\n      setMicConnected(false);\r\n    }\r\n  };\r\n\r\n  const startAudioMonitoring = (stream) => {\r\n    // Create audio context and analyser\r\n    const audioContext = new (window.AudioContext || window.webkitAudioContext)();\r\n    const analyser = audioContext.createAnalyser();\r\n    const microphone = audioContext.createMediaStreamSource(stream);\r\n    \r\n    analyser.fftSize = 256;\r\n    const bufferLength = analyser.frequencyBinCount;\r\n    const dataArray = new Uint8Array(bufferLength);\r\n    \r\n    microphone.connect(analyser);\r\n    \r\n    audioContextRef.current = audioContext;\r\n    analyserRef.current = analyser;\r\n    \r\n    // Monitor audio levels\r\n    const detectAudio = () => {\r\n      analyser.getByteFrequencyData(dataArray);\r\n      \r\n      // Calculate average volume\r\n      const average = dataArray.reduce((a, b) => a + b) / bufferLength;\r\n      const normalizedLevel = Math.min(average / 128, 1); // Normalize to 0-1\r\n      \r\n      setAudioLevel(normalizedLevel);\r\n      \r\n      animationFrameRef.current = requestAnimationFrame(detectAudio);\r\n    };\r\n    \r\n    detectAudio();\r\n  };\r\n\r\n  const stopAudioMonitoring = () => {\r\n    if (animationFrameRef.current) {\r\n      cancelAnimationFrame(animationFrameRef.current);\r\n    }\r\n    if (audioStream) {\r\n      audioStream.getTracks().forEach(track => track.stop());\r\n      setAudioStream(null);\r\n    }\r\n    if (audioContextRef.current) {\r\n      audioContextRef.current.close();\r\n      audioContextRef.current = null;\r\n    }\r\n    setAudioLevel(0);\r\n  };\r\n\r\n  const handlePlayClick = async () => {\r\n    // Check if we're in a browser environment\r\n    if (typeof window === 'undefined' || !navigator?.mediaDevices?.getUserMedia) {\r\n      alert(\"MediaDevices API not available. Please use HTTPS or localhost.\");\r\n      return;\r\n    }\r\n\r\n    if (!micConnected) {\r\n      alert(\"Please connect your microphone first!\");\r\n      return;\r\n    }\r\n\r\n    if (!isRecording) {\r\n      try {\r\n        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n        setIsRecording(true);\r\n        console.log(\"Recording started...\");\r\n        // In a real implementation, you would handle the recording here\r\n      } catch (err) {\r\n        console.error(\"Error starting recording:\", err);\r\n        alert(\"Failed to start recording. Please check your microphone.\");\r\n      }\r\n    } else {\r\n      setIsRecording(false);\r\n      console.log(\"Recording stopped...\");\r\n      // In a real implementation, you would stop and process the recording here\r\n    }\r\n  };\r\n\r\n  const handleMicClick = () => {\r\n    if (micConnected) {\r\n      // Stop monitoring if already connected\r\n      stopAudioMonitoring();\r\n      setMicConnected(false);\r\n    } else {\r\n      // Start monitoring\r\n      checkMicrophonePermission();\r\n    }\r\n  };\r\n\r\n  if (!mounted) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"prototype-container\">\r\n      <div className=\"prototype-content\">\r\n        {/* Header */}\r\n        <div className=\"prototype-header\">\r\n          <div className=\"logo-section\">\r\n            <div className=\"logo-content\">\r\n              <img src=\"/img/fLexiScribe-logo.png\" alt=\"Logo\" className=\"h-24 w-24\" />\r\n              <div className=\"flex flex-col items-start\">\r\n                <h1 className=\"text-4xl font-bold\">fLexiScribe</h1>\r\n                <p className=\"text-sm font-normal\">Your Note-Taking Assistant</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Main Control Panel */}\r\n        <div className=\"control-panel\">\r\n          {/* Play Button */}\r\n          <div className=\"control-section\">\r\n            <div className=\"control-label\">PLAY</div>\r\n            <button \r\n              className={`control-button play-button ${isRecording ? 'recording' : ''}`}\r\n              onClick={handlePlayClick}\r\n              aria-label={isRecording ? \"Stop recording\" : \"Start recording\"}\r\n            >\r\n              <FaPlay className=\"control-icon\" />\r\n            </button>\r\n            <div className=\"control-status\">\r\n              {isRecording ? \"Recording...\" : \"Press play to start recording.\"}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Mic Button */}\r\n          <div className=\"control-section\">\r\n            <div className=\"control-label\">MIC</div>\r\n            <button \r\n              className={`control-button mic-button ${micConnected ? 'connected' : 'disconnected'} ${audioLevel > 0.1 ? 'active' : ''}`}\r\n              onClick={handleMicClick}\r\n              aria-label=\"Check microphone\"\r\n              style={{\r\n                '--audio-level': audioLevel\r\n              }}\r\n            >\r\n              <FaMicrophone className=\"control-icon\" />\r\n            </button>\r\n            <div className={`control-status mic-status ${micConnected ? 'connected' : ''}`}>\r\n              <span>MIC: </span>\r\n              {micConnected ? (\r\n                <>\r\n                  <FaCheck className=\"check-icon\" /> Connected\r\n                </>\r\n              ) : (\r\n                \"Disconnected\"\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}